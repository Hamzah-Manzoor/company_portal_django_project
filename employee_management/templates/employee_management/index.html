{% extends 'base.html' %}

{% block title %}Home - Employee Portal{% endblock %}

{% block head %}
{% load static %}
<!--<link rel="stylesheet" href="{% static '/employee_management/css/index.css' %}">-->
<link rel="stylesheet" href="{% static 'employee_management/css/index.css' %}">
<!--<link rel="stylesheet" href="/employee_management/static/employee_management/css/index.css">-->
<!--<style>-->
<!--    /* Divider */-->
<!--.divider {-->
<!--    border: none;-->
<!--    height: 1px;-->
<!--    background-color: #ddd;-->
<!--    margin: 0;-->
<!--}-->

<!--/* Hero Section */-->
<!--.hero-section {-->
<!--    display: flex;-->
<!--    justify-content: center;-->
<!--    align-items: center;-->
<!--    /* background-color: #0073e6; */-->
<!--    background-color: #296198;-->
<!--    padding: 20px;-->
<!--    color: white;-->
<!--    position: relative;-->
<!--    height: 26.25vw; /* Maintain 16:9 aspect ratio using vw units */-->
<!--    overflow: hidden;-->
<!--}-->

<!--@media (max-width: 767px) {-->
<!--    /* Hero Section */-->
<!--    .hero-section {-->
<!--        display: flex;-->
<!--        justify-content: center;-->
<!--        align-items: center;-->
<!--        background-color: #296198;-->
<!--        padding: 20px;-->
<!--        color: white;-->
<!--        position: relative;-->
<!--        height: 56.25vw; /* Adjust height as needed */-->
<!--        overflow: hidden;-->
<!--    }-->
<!--}-->


<!--.slider {-->
<!--    display: flex;-->
<!--    justify-content: center;-->
<!--    align-items: center;-->
<!--    width: 100%;-->
<!--    height: 100%;-->
<!--    position: relative;-->
<!--}-->

<!--.slide {-->
<!--    transition: transform 0.5s ease, opacity 0.5s ease;-->
<!--    position: absolute;-->
<!--    width: 100%;-->
<!--    height: 100%;-->
<!--    display: flex;-->
<!--    flex-direction: column;-->
<!--    justify-content: center;-->
<!--    align-items: center;-->
<!--}-->

<!--.slide img {-->
<!--    width: 100%;-->
<!--    height: auto;-->
<!--    border-radius: 10px;-->
<!--}-->

<!--@media (min-width: 768px) {-->
<!--    .slide {-->
<!--        opacity: 0;-->
<!--        transform: scale(0.5);-->
<!--    }-->

<!--    .slide.active {-->
<!--        opacity: 1;-->
<!--        transform: scale(0.5);-->
<!--        z-index: 1;-->
<!--    }-->

<!--    .slide.left {-->
<!--        transform: translateX(-30%) scale(0.25);-->
<!--        opacity: 1;-->
<!--    }-->

<!--    .slide.right {-->
<!--        transform: translateX(30%) scale(0.25);-->
<!--        opacity: 1;-->
<!--    }-->
<!--}-->

<!--@media (max-width: 767px) {-->
<!--    .slide.active {-->
<!--        opacity: 1;-->
<!--        transform: translateX(0);-->
<!--    }-->

<!--    .slide {-->
<!--        transform: translateX(100%);-->
<!--    }-->

<!--    .slide:not(.active) {-->
<!--        opacity: 0;-->
<!--        transform: translateX(-100%);-->
<!--    }-->
<!--}-->

<!--.controls {-->
<!--    position: absolute;-->
<!--    top: 50%;-->
<!--    width: 100%;-->
<!--    display: flex;-->
<!--    justify-content: space-between;-->
<!--    transform: translateY(-50%);-->
<!--}-->

<!--.controls button {-->
<!--    background-color: rgba(0, 0, 0, 0.5);-->
<!--    border: none;-->
<!--    color: white;-->
<!--    font-size: 18px;-->
<!--    padding: 10px;-->
<!--    cursor: pointer;-->
<!--}-->

<!--/* Cards Section */-->
<!--.cards-section {-->
<!--    display: grid;-->
<!--    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));-->
<!--    gap: 20px;-->
<!--    padding: 20px;-->
<!--}-->

<!--.card {-->
<!--    background-color: white;-->
<!--    padding: 20px;-->
<!--    border-radius: 10px;-->
<!--    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);-->
<!--    transition: transform 0.2s;-->
<!--}-->

<!--.card:hover {-->
<!--    transform: scale(1.02);-->
<!--}-->

<!--.card h2 {-->
<!--    margin-top: 0;-->
<!--    color: #0073e6;-->
<!--}-->

<!--.card button {-->
<!--    background-color: #0073e6;-->
<!--    color: white;-->
<!--    border: none;-->
<!--    padding: 10px 20px;-->
<!--    border-radius: 5px;-->
<!--    cursor: pointer;-->
<!--    display: block;-->
<!--    margin: 20px auto 0; /* Center-align the button */-->
<!--}-->

<!--.card button:hover {-->
<!--    background-color: #005bb5;-->
<!--}-->

<!--/* Events and Announcements Sections */-->
<!--.events-section,-->
<!--.announcements-section {-->
<!--    margin-bottom: 20px;-->
<!--}-->

<!--.events-section h3,-->
<!--.announcements-section h3 {-->
<!--    color: #0073e6;-->
<!--    margin-bottom: 10px;-->
<!--}-->

<!--.events-section ul,-->
<!--.announcements-section ul {-->
<!--    padding: 0;-->
<!--}-->

<!--.events-section ul li,-->
<!--.announcements-section ul li {-->
<!--    margin-bottom: 15px;-->
<!--    padding-left: 30px;-->
<!--    position: relative;-->
<!--    list-style: none;-->
<!--    font-size: 16px;-->
<!--}-->

<!--.events-section ul li:before,-->
<!--.announcements-section ul li:before {-->
<!--    content: "\2022"; /* Bullet character */-->
<!--    position: absolute;-->
<!--    left: 0;-->
<!--    color: #0073e6;-->
<!--    font-size: 20px;-->
<!--    line-height: 1;-->
<!--    top: 50%;-->
<!--    transform: translateY(-50%);-->
<!--}-->

<!--.announcements-section ul li {-->
<!--    margin-bottom: 15px;-->
<!--    padding-left: 30px;-->
<!--    font-size: 16px;-->
<!--}-->

<!--.announcements-section ul li:before {-->
<!--    content: "\2022"; /* Bullet character */-->
<!--    position: absolute;-->
<!--    left: 0;-->
<!--    color: #0073e6;-->
<!--    font-size: 20px;-->
<!--    line-height: 1;-->
<!--    top: 50%;-->
<!--    transform: translateY(-50%);-->
<!--}-->

<!--/* Center align View All Events button */-->
<!--.cards-section .view-all-events {-->
<!--    text-align: center;-->
<!--    margin-top: 20px;-->
<!--}-->

<!--.cards-section .view-all-events button {-->
<!--    background-color: #0073e6;-->
<!--    color: white;-->
<!--    border: none;-->
<!--    padding: 10px 20px;-->
<!--    border-radius: 5px;-->
<!--    cursor: pointer;-->
<!--    font-size: 16px;-->
<!--}-->

<!--.cards-section .view-all-events button:hover {-->
<!--    background-color: #005bb5;-->
<!--}-->

<!--/* Annual Leave Details Card */-->
<!--.annual-leaves-card {-->
<!--    display: flex;-->
<!--    flex-direction: column;-->
<!--    justify-content: space-between;-->
<!--    /* height: 100%; */-->
<!--}-->

<!--.annual-leaves-card .leave-details {-->
<!--    flex: 1;-->
<!--    display: flex;-->
<!--    flex-direction: column;-->
<!--    justify-content: center;-->
<!--}-->

<!--.leave-item {-->
<!--    display: flex;-->
<!--    justify-content: space-between;-->
<!--    padding: 10px 0;-->
<!--    border-bottom: 1px solid #ddd;-->
<!--}-->

<!--.leave-item:last-child {-->
<!--    border-bottom: none;-->
<!--}-->

<!--.leave-title {-->
<!--    font-weight: bold;-->
<!--    color: #0073e6;-->
<!--}-->

<!--.leave-value {-->
<!--    font-size: 18px;-->
<!--    color: #333;-->
<!--}-->

<!--.apply-leave-container {-->
<!--    text-align: center;-->
<!--    margin-top: 20px;-->
<!--}-->

<!--.apply-leave-container button {-->
<!--    background-color: #0073e6;-->
<!--    color: white;-->
<!--    border: none;-->
<!--    padding: 10px 20px;-->
<!--    border-radius: 5px;-->
<!--    cursor: pointer;-->
<!--    font-size: 16px;-->
<!--}-->

<!--.apply-leave-container button:hover {-->
<!--    background-color: #005bb5;-->
<!--}-->

<!--/*Birthday Card*/-->
<!--.birthday-list {-->
<!--    list-style: none;-->
<!--    margin: 0;-->
<!--    padding: 0;-->
<!--}-->

<!--.birthday-list li {-->
<!--    display: flex;-->
<!--    align-items: center;-->
<!--    padding: 20px 0;-->
<!--    border-bottom: 1px solid #ddd;-->
<!--}-->

<!--.birthday-list li:last-child {-->
<!--    border-bottom: none;-->
<!--}-->

<!--.profile-icon {-->
<!--    width: 50px;-->
<!--    height: 50px;-->
<!--    border-radius: 50%;-->
<!--    margin-right: 10px;-->
<!--}-->

<!--.birthday-info {-->
<!--    display: flex;-->
<!--    flex-direction: column;-->
<!--}-->

<!--.birthday-name {-->
<!--    font-size: 18px;-->
<!--    font-weight: bold;-->
<!--    color: #333;-->
<!--}-->

<!--.birthday-position {-->
<!--    font-size: 14px;-->
<!--    color: #666;-->
<!--}-->

<!--.birthday-date {-->
<!--    font-size: 12px;-->
<!--    color: #999;-->
<!--}-->

<!--.profile-icon2 {-->
<!--    font-size: 50px;-->
<!--    color: gray;-->
<!--    padding-right: 12px;-->
<!--}-->

<!--/*Lunch Menu*/-->
<!--.lunch-menu-content {-->
<!--    display: flex;-->
<!--    flex-direction: column;-->
<!--    align-items: flex-start;-->
<!--    padding-top: 10px;-->
<!--    gap: 35px;-->
<!--}-->

<!--.menu-item,-->
<!--.menu-time {-->
<!--    display: flex;-->
<!--    align-items: flex-start;-->
<!--    gap: 10px;-->
<!--    font-size: 18px;-->
<!--}-->

<!--.menu-item i,-->
<!--.menu-time i {-->
<!--    font-size: 24px;-->
<!--    color: #0073e6;-->
<!--    margin-top: 4px; /* Adjusts the alignment */-->
<!--}-->

<!--.menu-item p,-->
<!--.menu-time p {-->
<!--    margin: 0;-->
<!--}-->

<!--.menu-item div,-->
<!--.menu-time div {-->
<!--    display: flex;-->
<!--    flex-direction: column;-->
<!--}-->

<!--.reaction-buttons {-->
<!--    display: flex;-->
<!--    justify-content: space-around;-->
<!--    padding-top: 15px;-->
<!--}-->

<!--.reaction-buttons button {-->
<!--    display: flex;-->
<!--    align-items: center;-->
<!--    gap: 5px;-->
<!--    padding: 10px 20px;-->
<!--    font-size: 16px;-->
<!--    background-color: #0073e6;-->
<!--    color: white;-->
<!--    border: none;-->
<!--    border-radius: 5px;-->
<!--    cursor: pointer;-->
<!--}-->

<!--.reaction-buttons button:hover {-->
<!--    background-color: #005bb5;-->
<!--}-->

<!--.reaction-buttons button i {-->
<!--    font-size: 20px;-->
<!--}-->






<!--.reaction-buttons {-->
<!--    display: flex;-->
<!--    gap: 10px;-->
<!--}-->

<!--.reaction-buttons button {-->
<!--    display: flex;-->
<!--    align-items: center;-->
<!--    gap: 5px;-->
<!--    padding: 5px 10px;-->
<!--}-->

<!--.reaction-buttons button span {-->
<!--    background-color: white;-->
<!--    color: #0073e6;-->
<!--    padding: 2px 6px;-->
<!--    border-radius: 50%;-->
<!--}-->

<!--</style>-->
{% endblock %}

{% block content %}
    <!-- Divider -->
    <hr class="divider">

    <!-- Hero Section with Slider -->
    <section aria-label="Hero Section" class="hero-section">
        <div class="slider" id="slider">
            <div class="slide" data-index="0">
                <img src="{% static 'employee_management/assets/hero_section_1_final.png' %}" alt="Image 1">
            </div>
            <div class="slide" data-index="1">
                <img src="{% static 'employee_management/assets/hero_section_2_final.png' %}" alt="Image 2">
            </div>
            <div class="slide" data-index="2">
                <img src="{% static 'employee_management/assets/hero_section_3_final.png' %}" alt="Image 3">
            </div>
        </div>
        <div class="controls">
            <button id="prev">&lt;</button>
            <button id="next">&gt;</button>
        </div>
    </section>

    <!-- Cards Section -->
    <main class="cards-section">

        <!-- Upcoming Events and Announcements Card -->
        <article class="card">
            <h2 style="color: red;">Events and Announcements</h2>

            <div class="events-section">
                <h3>Events</h3>
                <ul id="events-list">
                    {% for event in events %}
                        <li> <b>{{ event.title }}</b> <br> {{ event.date }} at {{ event.time }}</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="announcements-section">
                <h3>Announcements</h3>
                <ul id="announcements-list">
                    {% for announcement in announcements %}
                        <li><b>{{ announcement.title }}</b> <br> {{ announcement.date }}</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="view-all-events">
                <button onclick="window.location.href='events'">View All Events</button>
            </div>
        </article>

        <!-- Annual Leave Details Card -->
        <article class="card annual-leaves-card">
            <h2>Annual Leave Details</h2>
            <div class="leave-details">
                <div class="employee-leave-details">
                    <h3>{{ employee.name }} ({{ employee.position }})</h3>
                    <div class="leave-item">
                        <span class="leave-title">Annual Leaves:</span>
                        <span class="leave-value">{{ employee.annual_leaves_taken }} / {{ allocated_leaves.annual_leaves }}</span>
                    </div>
                    <div class="leave-item">
                        <span class="leave-title">Casual Leaves:</span>
                        <span class="leave-value">{{ employee.casual_leaves_taken }} / {{ allocated_leaves.casual_leaves }}</span>
                    </div>
                    <div class="leave-item">
                        <span class="leave-title">Medical Leaves:</span>
                        <span class="leave-value">{{ employee.medical_leaves_taken }} / {{ allocated_leaves.medical_leaves }}</span>
                    </div>
                    <div class="leave-item">
                        <span class="leave-title">Unpaid Leaves:</span>
                        <span class="leave-value">{{ employee.unpaid_leaves_taken }}</span>
                    </div>
                </div>
            </div>
            <div class="apply-leave-container">
                <button onclick="window.location.href='leaves'">Apply For Leave</button>
            </div>
        </article>

        <!-- Upcoming Birthdays Card -->
        <article class="card">
            <h2>Upcoming Birthdays</h2>
            <ul class="birthday-list">
                {% for employee in upcoming_birthdays %}
                    <li>
                        <i class="fas fa-user-circle profile-icon2"></i>
                        <div class="birthday-info">
                            <span class="birthday-name">{{ employee.name }}</span>
                            <span class="birthday-position">{{ employee.position }}</span>
                            <span class="birthday-date">{{ employee.birthdate|date:"F j" }}</span>
                        </div>
                    </li>
                {% empty %}
                    <li>No upcoming birthdays in the next 60 days.</li>
                {% endfor %}
            </ul>
        </article>

        <!-- Lunch Menu Card -->
        {% load custom_filters %}
        <article class="card">
            <h2>Lunch Menu</h2>
            <div class="lunch-menu-content">
                <div class="menu-item">
                    <i class="fas fa-utensils"></i>
                    <div>
                        <p><strong>Today's Menu:</strong></p>
                        {% if todays_menu == "Weekend" %}
                            <p>Off-Day</p>
                        {% else %}
                            <p>{{ todays_menu.dish_name }}</p>
                        {% endif %}
                    </div>
                </div>
                <div class="menu-time">
                    <i class="fas fa-clock"></i>
                    <div>
                        <p><strong>Lunch Time:</strong></p>
                        <p>{{ admin.lunch_time|format_lunch_time }}</p>
                    </div>
                </div>
            </div>
            {% if todays_menu != "Weekend" %}
            <div class="reaction-buttons">
                <form method="post" action="{% url 'like_lunch' %}" id="like-form">
                    {% csrf_token %}
                    <input type="hidden" name="like" value="1">
                    <button type="submit" id="like-button" class="like-button" style="background-color: {% if liked %}gray{% else %}#0073e6{% endif %};">
                        <i class="fas fa-thumbs-up"></i> Like <span id="like-count">{{ likes_count }}</span>
                    </button>
                </form>

                <form method="post" action="{% url 'like_lunch' %}" id="dislike-form">
                    {% csrf_token %}
                    <input type="hidden" name="dislike" value="1">
                    <button type="submit" id="dislike-button" class="dislike-button" style="background-color: {% if disliked %}gray{% else %}#0073e6{% endif %};">
                        <i class="fas fa-thumbs-down"></i> Dislike <span id="dislike-count">{{ dislikes_count }}</span>
                    </button>
                </form>
            </div>
            {% endif %}
        </article>

    </main>

    <script src="{% static 'employee_management/js/index.js' %}"></script>

{% endblock %}

